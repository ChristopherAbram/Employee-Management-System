
CREATE TABLE IF NOT EXISTS `page` (
	`id`		INT(11) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
   	`link`		TEXT,
   	`namepath` 	VARCHAR(255),
	`title`		TEXT,
   	`body`		LONGTEXT,
	`description` 	TEXT,
	`keywords`	TEXT,
   	`page_id`	INT(11) UNSIGNED NULL,
   	`ord`		INT(3) DEFAULT 0,
   	`bin`	 	TINYINT(1) DEFAULT 0,
   	`hide` 		TINYINT(1) DEFAULT 0,
   	`mark` 		TINYINT(1) DEFAULT 0,
   	`visits`	INT(11) DEFAULT 0,
   	`cdate`		DATETIME DEFAULT NULL,
   	`edate` 	DATETIME DEFAULT NULL,
   	`user_id`	INT(11) UNSIGNED NULL,
	`vars`		TEXT,
	
	CONSTRAINT `page_user_fk` FOREIGN KEY (`user_id`) REFERENCES `user`(`id`) ON DELETE SET NULL,
	CONSTRAINT `page_page_fk` FOREIGN KEY (`page_id`) REFERENCES `page`(`id`) ON DELETE CASCADE ON UPDATE CASCADE,
   	UNIQUE KEY `namepath` (`namepath`)

) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;

INSERT INTO page(id, namepath, title) VALUES(1, 'root', 'ROOT PAGE');
ALTER TABLE page MODIFY COLUMN page_id INT(11) UNSIGNED DEFAULT 1;